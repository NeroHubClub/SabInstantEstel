local player = game.Players.LocalPlayer
local markPosition = nil
local lastPosition = nil
local invisible = false
local fastInteract = false

-- auto mark on spawn (13 studs forward)
local function setSpawnMark(character)
    local hrp = character:WaitForChild("HumanoidRootPart")
    local lookDir = hrp.CFrame.LookVector
    markPosition = hrp.Position + (lookDir * 13)
end

-- invisibility
local function setInvisible(state)
    local char = player.Character
    if not char then return end

    for _, v in ipairs(char:GetDescendants()) do
        if v:IsA("BasePart") then
            if v.Name ~= "HumanoidRootPart" then
                v.Transparency = state and 1 or 0
            end
            v.CanCollide = not state
        elseif v:IsA("Decal") then
            v.Transparency = state and 1 or 0
        end
    end
end

-- fast interact logic
local function applyFastInteract(state)
    for _, obj in ipairs(workspace:GetDescendants()) do
        if obj:IsA("ProximityPrompt") then
            if state then
                obj.HoldDuration = 0
                obj.MaxActivationDistance = 50
            end
        end
    end
end

-- character handling
if player.Character then
    setSpawnMark(player.Character)
end

player.CharacterAdded:Connect(function(char)
    task.wait(0.5)
    setSpawnMark(char)

    if invisible then
        task.wait(0.3)
        setInvisible(true)
    end
end)

-- auto apply fast interact to new prompts
workspace.DescendantAdded:Connect(function(obj)
    if fastInteract and obj:IsA("ProximityPrompt") then
        obj.HoldDuration = 0
        obj.MaxActivationDistance = 50
    end
end)

-- GUI
local screenGui = Instance.new("ScreenGui", player.PlayerGui)
screenGui.Name = "NeroInstantStealGUI"
screenGui.ResetOnSpawn = false
screenGui.IgnoreGuiInset = true

local main = Instance.new("Frame", screenGui)
main.Size = UDim2.new(0, 320, 0, 420)
main.Position = UDim2.new(0.5, 0, 0.5, 0)
main.AnchorPoint = Vector2.new(0.5, 0.5)
main.BackgroundColor3 = Color3.fromRGB(40,40,40)
main.Active = true
main.Draggable = true
Instance.new("UICorner", main).CornerRadius = UDim.new(0,15)

local grad = Instance.new("UIGradient", main)
grad.Color = ColorSequence.new(Color3.fromRGB(60,60,60), Color3.fromRGB(20,20,20))

local function makeButton(text, y, color)
    local b = Instance.new("TextButton", main)
    b.Size = UDim2.new(0, 220, 0, 50)
    b.Position = UDim2.new(0.5, -110, 0, y)
    b.Text = text
    b.Font = Enum.Font.GothamBold
    b.TextSize = 18
    b.TextColor3 = Color3.new(1,1,1)
    b.BackgroundColor3 = color
    Instance.new("UICorner", b).CornerRadius = UDim.new(0,10)
    return b
end

-- TITLE
local title = Instance.new("TextLabel", main)
title.Size = UDim2.new(1, 0, 0, 40)
title.Position = UDim2.new(0, 0, 0, 10)
title.Text = "NERO INSTANT STEAL"
title.Font = Enum.Font.GothamBold
title.TextScaled = true
title.BackgroundTransparency = 1
title.TextColor3 = Color3.new(1,1,1)

-- BUTTONS
local instantBtn = makeButton("INSTANT STEAL", 70, Color3.fromRGB(0,255,128))
local flashBtn   = makeButton("FLASH STEP", 135, Color3.fromRGB(255,85,0))
local invisBtn   = makeButton("INVISIBLE : OFF", 200, Color3.fromRGB(120,120,120))
local fastBtn    = makeButton("FAST INTERACT : OFF", 265, Color3.fromRGB(120,120,120))

-- CREATOR
local creator = Instance.new("TextLabel", main)
creator.Size = UDim2.new(1, 0, 0, 20)
creator.Position = UDim2.new(0, 0, 1, -25)
creator.Text = "Created by: Nero"
creator.Font = Enum.Font.Gotham
creator.TextScaled = true
creator.BackgroundTransparency = 1
creator.TextColor3 = Color3.fromRGB(200,200,200)

-- LOGIC
instantBtn.MouseButton1Click:Connect(function()
    local char = player.Character
    if char and char:FindFirstChild("HumanoidRootPart") and markPosition then
        local hrp = char.HumanoidRootPart
        lastPosition = hrp.CFrame
        hrp.CFrame = CFrame.new(markPosition + Vector3.new(0,3,0))
        task.wait(0.4)
        hrp.CFrame = lastPosition
    end
end)

flashBtn.MouseButton1Click:Connect(function()
    local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
    if hrp then
        hrp.CFrame = hrp.CFrame + (hrp.CFrame.LookVector * 5)
    end
end)

invisBtn.MouseButton1Click:Connect(function()
    invisible = not invisible
    setInvisible(invisible)
    invisBtn.Text = "INVISIBLE : " .. (invisible and "ON" or "OFF")
    invisBtn.BackgroundColor3 = invisible and Color3.fromRGB(0,170,255) or Color3.fromRGB(120,120,120)
end)

fastBtn.MouseButton1Click:Connect(function()
    fastInteract = not fastInteract
    applyFastInteract(fastInteract)
    fastBtn.Text = "FAST INTERACT : " .. (fastInteract and "ON" or "OFF")
    fastBtn.BackgroundColor3 = fastInteract and Color3.fromRGB(170,0,255) or Color3.fromRGB(120,120,120)
end)
